{{#partial "hero"}}

<style>
  body {
    margin-bottom: 0px;
    margin-top: 0px;
  }

  .body {
    margin-bottom: 0px;
    margin-top: 0px !important;
  }

  .prep-stations {
    margin: 30px auto;
    margin-bottom: 3rem;
    max-width: 1200px;
    padding: 0px 15px;
  }

  .prep-stations .cts-header p {
    margin-bottom: 10px;
    text-align: center;
  }

  .prep-stations .checkout.desktop {
    margin-top: 10px;
  }

  .question-mark-icon {
    z-index: 5 !important;
  }

  .select2 {
    z-index: 6 !important;
  }

  .select2-container--default .select2-search--dropdown .select2-search__field {
    border-radius: 5px;
    margin: 10px 0px;
    padding: 5px 10px;
  }

  .consent-manager {
    z-index: 999999;
  }

  @media (max-width: 1000px) {
    .select2 {
      width: 100% !important;
    }
  }
</style>

<head>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js" defer></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      $(".model-selector").select2();
    });

    $(document).on('mousemove click tap', function() {
      $('.select2-search__field').attr('placeholder', 'Search for your model number');
    });
  </script>
</head>

<div class="prep-stations">
  <div class="cts-header">
    <h2 class="cts-heading">OEM Replacement Cutting Boards</h2>
    <p>If you cannot find your exact model, please <a href="/contact-us/">contact us</a> and we will be sure to design a cutting board to your exact specifications!</p>
  </div>
  
  <div class="configurator" id="replacement-cutting-board">
    <div class="modal-overlay" id="faq-modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>

        <div class="cts-header">
          <h2 class="cts-heading no-margin">Frequently Asked Questions</h2>
        </div>

        <div class="section hdpe" id="hdpe">
          <div class="label">
            What material is the cutting board made from?
          </div>

          <div class="content">
            <div class="text-content">
              <div class="info">
                <p class="text">All of our plastic cutting boards are made from high-density polyethylene (HDPE) plastic. HDPE is a formulated non-porous, high density material for food processing applications designed with superior scratch resistance. It will not absorb moisture, bacteria, or odors. It will not chip or peel and is dishwasher-safe. HDPE is not altered by chemicals, moisture, or impact which makes it ideal for such a wide range of applications.</p>

                <p class="text centered"><a href="https://store-hep33asv71.mybigcommerce.com/content/cuttingboard-sds.pdf" target="_blank">View Safety Data Sheet (SDS)</a></p>

                <div class="comparison-chart">
                  <div class="column">
                    <h2 class="heading">Key Material Benefits</h2>
                    <ul>
                      <li>Does not absorb moisture, odor, or bacteria</li>
                      <li>Easy to clean, dishwasher-safe</li>
                      <li>Cleaning fluids wash off easily</li>
                      <li>Ability to use at low temperatures â€” freezer applications</li>
                    </ul>
                  </div>

                  <div class="column">
                    <h2 class="heading">Advantages</h2>
                    <ul>
                      <li>Specially designed texture will maximize product life and minimize wear on knives</li>
                      <li>Finish is consistent on both sides so that they can be used on either side, extending their longevity</li>
                      <li>Will not chip, peel, or crack</li>
                    </ul>
                  </div>

                  <div class="column">
                    <h2 class="heading">Compliances</h2>
                    <ul>
                      <li>FDA</li>
                      <li>USDA</li>
                      <li>NSF (<em>Effective Date: January 1, 2016</em>)</li>
                      <li>RoHS</li>
                    </ul>
                  </div>
                </div>

                <div class="comparison-chart">
                  <div class="column">
                    <h2 class="heading">Colors</h2>
                    <div class="color-block">
                      <span>Natural</span>
                      <span class="color-swatch natural long"></span>
                    </div>

                    <div class="color-block">
                      <span>Polar White</span>
                      <span class="color-swatch polar-white long"></span>
                    </div>

                    <div class="color-block">
                      <span>Black</span>
                      <span class="color-swatch black long"></span>
                    </div>

                    <div class="color-block">
                      <span>Gray</span>
                      <span class="color-swatch gray long"></span>
                    </div>

                    <div class="color-block">
                      <span>Beige</span>
                      <span class="color-swatch beige long"></span>
                    </div>

                    <div class="color-block">
                      <span>Seafoam</span>
                      <span class="color-swatch seafoam long"></span>
                    </div>

                    <div class="color-block">
                      <span>Sandshade</span>
                      <span class="color-swatch sandshade long"></span>
                    </div>

                    <div class="color-block">
                      <span>Blue</span>
                      <span class="color-swatch blue long"></span>
                    </div>

                    <div class="color-block">
                      <span>Dark Blue</span>
                      <span class="color-swatch dark-blue long"></span>
                    </div>

                    <div class="color-block">
                      <span>Green</span>
                      <span class="color-swatch green long"></span>
                    </div>

                    <div class="color-block">
                      <span>Dark Green</span>
                      <span class="color-swatch dark-green long"></span>
                    </div>

                    <div class="color-block">
                      <span>Red</span>
                      <span class="color-swatch red long"></span>
                    </div>

                    <div class="color-block">
                      <span>Dark Red</span>
                      <span class="color-swatch dark-red long"></span>
                    </div>

                    <div class="color-block">
                      <span>Yellow</span>
                      <span class="color-swatch yellow long"></span>
                    </div>

                    <div class="color-block">
                      <span>Dark Yellow</span>
                      <span class="color-swatch dark-yellow long"></span>
                    </div>
                  </div>

                  <div class="column">
                    <h2 class="heading">Thickness</h2>
                    <p class="text">1/4" - 2"</p>
                    <p class="thickness-warning">Thicknesses above 1" only available in smooth texture</p>

                    <div class="thickness-image">
                      <div class="quarter-inch-block"></div>
                      <div class="quarter-inch-shadow"></div>
                      <div class="two-inch-block"></div>
                      <div class="two-inch-shadow"></div>
                    </div>
                  </div>

                  <div class="column">
                    <h2 class="heading">Finish</h2>
                    <p class="text">Textured (Matte) or Smooth</p>
                    
                    <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/hdpe-texture-comparison-zoomed.png" class="diagram-alternate"></img>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="section brand-model" id="brand-model">
          <div class="label">
            I don't see the brand or model I need?
          </div>

          <div class="content">
            <div class="text-content">
              <div class="info">
                <p class="text">Plastic-Craft Products, (Plastic Cutting Boards) sources and distributes many FDA compliant colors, thicknesses, and textures but if you don't see what you want, please contact us by phone or email and we will do our best to meet your needs. If you know the exact dimensions of the board you would like to purchase, feel free to enter them use our <a href="https://plasticcuttingboards.com">cut-to-size feature</a> to order your custom cutting board.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="section shipping-cost" id="shipping-cost">
          <div class="label">
            How do you calculate shipping costs?
          </div>

          <div class="content">
            <div class="text-content">
              <div class="info">
                <p class="text">Plastic-Craft Products is pleased to offer an enhanced value shipping program on PlasticCuttingBoards.com for all orders shipped within the Continental U.S. (excluding Hawaii and Alaska)</p>

                <br>

                <ul class="text">
                  <li>Orders <strong>UNDER $75.00</strong> and within the standard size dimensions and weight qualify for a <strong>FLAT $6.00 RATE</strong> for standard shipping.</li>
                  <li>Orders <strong>OVER $75.00</strong> and within the standard size dimensions and weight qualify for <strong>FREE</strong> standard shipping.</li>
                </ul>

                <p class="text">Our site will automatically offer the most affordable packing for your order and may split your order into multiple packages to offer you the best shipping rate. If the item(s) in your cart is/are estimated to be dimensionally oversize, your shipping quote will include a large package surcharge. In many oversize cases, simply reducing the dimensions of the board by just a few inches may return standard size rates. If ordering a large board, it is often recommended to purchase two separate boards (each half of the desired length) to be placed next to each other in order to minimize the shipping costs caused by the large package surcharge.</p>

                <br>

                <p class="text">Orders which contain item(s) that exceed the UPS weight and size limits (this includes full sheets) and cannot be shipped via UPS can <strong>ONLY</strong> be shipped via an LTL freight carrier or picked up locally.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="section lead-time" id="lead-time">
          <div class="label">
            What is the typical lead time?
          </div>

          <div class="content">
            <div class="text-content">
              <div class="info">
                <p class="text">Most orders are cut and shipped within 1-2 business days of order receipt. Please note that this does not include transit time. Depending on your destination location, ground transit is generally between one to five days and oversize shipments via LTL freight carrier may take a little longer.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="section cancel" id="cancel">
          <div class="label">
            What if I want to cancel or change my order after I have submitted it?
          </div>

          <div class="content">
            <div class="text-content">
              <div class="info">
                <p class="text">If you made a mistake placing your order, or would like to cancel it prior to shipment, please send us an email at <a href="mailto:ecom@plastic-craft.com">ecom@plastic-craft.com</a> as soon as possible. If your order has not yet been cut or shipped, we will be happy to facilitate such request.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="product-details">
      <div class="product-image">
        <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/prep-center-cutting-board.png?t=1694629022" alt="Product Image">
      </div>
    </div>
  
    <div class="product-options">
      <div class="section brand">
        <div class="label">
          Brand
          <img src="https://plastic-craft.com/content/question-mark-icon.svg" class="question-mark-icon open-modal" data-modal="faq-modal" data-section="brand-model">
        </div>

        <div class="btn-wrapper contain">
          <button class="cts-btn thumbnail active" data-brand="APW">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/apw-logo.png" alt="" class="image-thumbnail">
            APW
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Avantco">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/avantco-logo.png" alt="" class="image-thumbnail">
            Avantco
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Beverage_Air">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/beverage-air-logo.png" alt="" class="image-thumbnail">
            Beverage-Air
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Continental">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/continental-logo.png" alt="" class="image-thumbnail">
            Continental
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Delfield">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/delfield-logo.png" alt="" class="image-thumbnail">
            Delfield
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Duke">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/duke-logo.png" alt="" class="image-thumbnail">
            Duke
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Fagor">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/fagor-logo.png" alt="" class="image-thumbnail">
            Fagor
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Garland">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/garland-logo.png" alt="" class="image-thumbnail">
            Garland
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Henny_Penny">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/henny-penny-logo.png" alt="" class="image-thumbnail">
            Henny Penny
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Kairak">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/kairak-logo.png" alt="" class="image-thumbnail">
            Kairak
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Lang">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/lang-logo.png" alt="" class="image-thumbnail">
            Lang
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Master_Bilt">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/master-bilt-logo.png" alt="" class="image-thumbnail">
            Master-Bilt
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Nemco">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/nemco-logo.png" alt="" class="image-thumbnail">
            Nemco
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Norlake">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/norlake-logo.png" alt="" class="image-thumbnail">
            Norlake
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Randell">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/randell-logo.png" alt="" class="image-thumbnail">
            Randell
          </button>
          
          <button class="cts-btn thumbnail" data-brand="True">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/true-logo.png" alt="" class="image-thumbnail">
            True
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Turbo_Air">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/turbo-air-logo.png" alt="" class="image-thumbnail">
            Turbo Air
          </button>
          
          <button class="cts-btn thumbnail" data-brand="Victory">
            <img src="https://cdn11.bigcommerce.com/s-ibf5bmbfu4/images/stencil/original/image-manager/victory-logo.png" alt="" class="image-thumbnail">
            Victory
          </button>
        </div>
      </div>

      <div class="section model">
        <div class="label">
          Model
          <img src="https://plastic-craft.com/content/question-mark-icon.svg" class="question-mark-icon open-modal" data-modal="faq-modal" data-section="brand-model">
        </div>

        <div>
          <select class="model-selector" name="model">
          </select>
        </div>

        <div class="checkout desktop">
          <div class="price-quantity">
            <div class="price"><span class="price-value">$0.00</span> <span class="shipping">(+$6.00 estimated shipping)</span><img src="https://plastic-craft.com/content/question-mark-icon.svg" class="question-mark-icon open-modal" data-modal="faq-modal" data-section="shipping-cost"></div>
            <div class="quantity">
              <button class="decrement">-</button>
              <input type="number" class="quantity-input" value="1">
              <button class="increment">+</button>
            </div>
          </div>
      
          <button class="add-to-cart">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>

  <div class="message-box">
    <div class="alert danger error-list"></div>
  </div>
</div>

<script>
  var globalTitle = "";
  var globalPrice = null;
  var globalSku = null;
  var globalWeight = 0.00;
  var width = 0.00
  var length = 0.00;
  var thickness = 0.00;
  var globalQuantity = 1;
  
  $(function() {
    // Function to handle the 'change' event of .model-selector
    function handleModelChange() {
      updateShipping();
  
      var selectedOption = $(".model-selector option:selected").text();
      thickness = extractThickness(selectedOption);
      var dimensions = extractDimensions(selectedOption);
  
      // Define the mapping between thickness and base SKU
      var thicknessToBaseSku = {
        "0.25": "PE454",
        "0.375": "PE378",
        "0.5": "PE10",
        "0.625": "PE67",
        "0.75": "PE68",
        "1": "PE69"
      };
  
      // Construct the URL based on the base SKU
      var baseSku = thicknessToBaseSku[thickness];
  
      width = dimensions.width;
      length = dimensions.length;
  
      // Format the SKU based on width and length
      var formattedSku = `${baseSku}_W${width}L${length}`;
  
      globalSku = formattedSku; // Store the SKU globally
      globalWeight = calculateWeight(width, length, thickness);
  
      var brand = $(".cts-btn.thumbnail.active").text().trim();
      var modelNumber = selectedOption.split('(')[0].trim();
  
      globalTitle = `OEM ${brand} Replacement HDPE Cutting Board (${modelNumber}) - Natural, ${thickness}" Thick, ${width}" W x ${length}" L`;
  
      // Fetch data from the constructed URL with the base SKU
      var url = `https://cut-to-size.herokuapp.com/products/${baseSku}`;
      fetch(url)
        .then(response => response.json())
        .then(data => {
          // Calculate the price based on the provided formula
          var basePrice = data.basePrice;
          var squareFootage = (length * width) / 144; // Divide by 144 to convert to square feet
          var markupMultiplier = 3.98;
          var cuttingCharge = 10.00;
  
          globalPrice = ((basePrice * squareFootage * markupMultiplier) + cuttingCharge).toFixed(2); // Calculate global price and round to 2 decimal places
          console.log(data);
  
          // Update the .price-value element with the rounded globalPrice
          $('.price-value').text('$' + globalPrice);
        })
        .catch(error => {
          console.error('Error fetching data:', error);
        });
    }
  
    // Function to calculate weight
    function calculateWeight(length, width, selectedThickness) {
      return (length * width * selectedThickness) * 0.038;
    }
  
    function updateShipping() {
      setTimeout(() => {
        const shippingElements = document.querySelectorAll('.shipping');
  
        var selectedOption = $(".model-selector option:selected").text();
        var dimensions = extractDimensions(selectedOption);
        var width = dimensions.width;
        var length = dimensions.length;
  
        if (globalPrice >= 75) {
          shippingElements.forEach(element => {
            const text = `(+FREE shipping)`;
            element.textContent = text;
            element.classList.remove('warning');
          });
        } else {
          shippingElements.forEach(element => {
            const text = `(+$6.00 estimated shipping)`;
            element.textContent = text;
            element.classList.remove('warning');
          });
        }
  
        var girth = ((width + 1) * 2);
        var cubeSize = girth + (length + 1);
  
        if (cubeSize > 118) {
          shippingElements.forEach(element => {
            const text = `(These dimensions may NOT qualify for free shipping)`;
            element.textContent = text;
            element.classList.add('warning');
          });
        }
      }, 100); // Introduce a very small delay to allow class changes to propagate
    }
  
    // Attach the 'change' event handler to .model-selector
    $('.model-selector').on('change', handleModelChange);
  
    // Trigger the 'change' event on page load
    $('.model-selector').change();
  
    // Add a click event handler for brand buttons (.cts-btn.thumbnail)
    $('.cts-btn.thumbnail').on('click', function() {
      // Trigger the 'change' event of .model-selector when a brand button is clicked
      $('.model-selector').change();
    });
  
    // Function to extract thickness from the selected option
    function extractThickness(optionText) {
      // Find the last occurrence of a numeric value followed by " Thick" in the string
      var numericMatch = optionText.match(/(\d+(\.\d+)?)\s*\" Thick/g);
      if (numericMatch) {
        var lastMatch = numericMatch[numericMatch.length - 1];
        // Extract the numeric value and remove any trailing non-numeric characters
        var thickness = lastMatch.match(/(\d+(\.\d+)?)/)[0];
        return thickness;
      } else {
        return '0'; // Return '0' if no numeric value is found
      }
    }
  
    // Function to extract width and length from the selected option
    function extractDimensions(optionText) {
      var dimensionsRegex = /(\d+(\.\d+)?)\"\s*x\s*(\d+(\.\d+)?)\"/;
      var matches = optionText.match(dimensionsRegex);
      if (matches && matches.length === 5) {
        var width = parseFloat(matches[3]);
        var length = parseFloat(matches[1]);
        return { width, length };
      } else {
        return { width: 0, length: 0 }; // Return default values if not found
      }
    }
  });
</script>

<script>
  const modelOptions = {
    APW: [
      '32010635 (30.625" x 7.5" / 1" Thick)',
      '32010636 (44.625" x 7.5" / 1" Thick)',
      '32010637 (58.625" x 7.5" / 1" Thick)',
      '32010638 (72.625" x 7.5" / 1" Thick)',
    ],
    Avantco: [
      'PICL1 (49" x 19" / 0.75" Thick)',
      'PICL2 (70.75" x 19" x 0.75" Thick)',
      'PICL3 (92" x 19" / 0.75" Thick)',
      'SCL1 (27.5" x 9.5" / 0.75" Thick)',
      'SCL2 (46.5" x 11.5" / 0.75" Thick)',
      'SCL2-60 (60" x 11.5" / 0.75" Thick)',
      'SCL3 (70" x 10.5" / 0.75" Thick)',
      'SCLM1 (27.25" x 8" / 0.75" Thick)',
      'SCLM2 (46.5" x 8" / 0.75" Thick)',
      'SCLM2-60 (60" x 8" / 0.75" Thick)',
      'SCLM3 (70.25" x 8" / 0.75" Thick)',
    ],
    Beverage_Air: [
      '705-264C (27" x 17" / 0.5" Thick)',
    ],
    Continental: [
      '5-251 (48" x 19" / 0.5" Thick)',
    ],
    Delfield: [
      '000-B3U-005A-S (48" x 8" / 0.5" Thick)',
    ],
    Duke: [
      '215303 (58.375" x 7" / 0.5" Thick)',
    ],
    Fagor: [
      '600305M0010 (48" x 10" / 0.5" Thick)',
      '600305M0011 (60" x 10" / 0.5" Thick)',
      '600305M0012 (72" x 10" / 0.5" Thick)',
      '600305M0028 (67" x 19" / 0.5" Thick)',
      '600305M0032 (46" x 19" / 0.5" Thick)',
      'M10305M0002 (48" x 10" / 0.5" Thick)',
      'M10305M0003 (60" x 10" / 0.5" Thick)',
      'M10305M0004 (72" x 10" / 0.5" Thick)',
    ],
    Garland: [
      '4512093 (24" x 6" / 0.5" Thick)',
      '4517939 (36" x 6" / 0.5" Thick)',
    ],
    Henny_Penny: [
      '38653 (47" x 9" / 0.5" Thick)',
      '38654 (68" x 9" / 0.5" Thick)',
      '58606 (82" x 9" / 0.5" Thick)',
    ],
    Kairak: [
      '25887 (96" x 15" / 0.5" Thick)',
    ],
    Lang: [
      'M9-50311-08 (60" x 8" / 0.5" Thick)',
      'M9-50311-08-24 (24" x 8" / 0.5" Thick)',
      'M9-50311-08-36 (36" x 8" / 0.5" Thick)',
      'M9-50311-08-48 (48" x 8" / 0.5" Thick)',
    ],
    Master_Bilt: [
      'MBPT44 (44.375" x 19" / 0.5" Thick)',
    ],
    Nemco: [
      '66381 (20.125" x 15.125" / 0.5" Thick)',
    ],
    Norlake: [
      '145782 (27.5" x 9.5" / 0.5" Thick)',
    ],
    Randell: [
      'RPCPH0833 (33" x 8" / 0.5" Thick)',
    ],
    True: [
      '810293 (27.5" x 11.75" / 0.5" Thick)',
      '910268 (48" x 8.875" / 0.5" Thick)',
      '910269 (72" x 8.875" / 0.5" Thick)',
      '910270 (48" x 11.75" / 0.5" Thick)',
      '910271 (72" x 11.75" / 0.5" Thick)',
      '915113 (36" x 11.75" / 0.5" Thick)',
      '915119 (119" x 19.5" / 0.5" Thick)',
      '915120 (119" x 19.5" / 0.5" Thick)',
      '915121 (44.25" x 19.5" / 0.5" Thick)',
      '915122 (44.25" x 19.5" / 0.5" Thick)',
      '915123 (60" x 19.5" / 0.5" Thick)',
      '915124 (60" x 19.5" / 0.5" Thick)',
      '915125 (67" x 19.5" / 0.5" Thick)',
      '915126 (67" x 19.5" / 0.5" Thick)',
      '915127 (93" x 19.5" / 0.5" Thick)',
      '915129 (27.5" x 8.875" / 0.5" Thick)',
      '915130 (27.5" x 8.875" / 0.5" Thick)',
      '915131 (27.5" x 8.875" / 0.5" Thick)',
      '915132 (27.5" x 8.875" / 0.5" Thick)',
      '915133 (27.5" x 11.75" / 0.5" Thick)',
      '915142 (27.5" x 11.75" / 0.5" Thick)',
    ],
    Turbo_Air: [
      '30241M0041 (48" x 9.5" / 0.5" Thick)',
    ],
    Victory: [
      '50830401 (48" x 12" / 0.5" Thick)',
    ]
  };
  
  // Function to update the model selector based on the selected brand
  function updateModelSelector(brand) {
    const modelSelector = document.querySelector(".model-selector");
    modelSelector.innerHTML = ""; // Clear the current options
  
    // Add options based on the selected brand
    if (brand in modelOptions) {
      const brandModelOptions = modelOptions[brand];
      brandModelOptions.forEach((modelOption) => {
        const optionValue = modelOption.split(' ')[0]; // Get the text before the space
        const option = document.createElement("option");
        option.value = optionValue;
        option.textContent = modelOption;
        modelSelector.appendChild(option);
      });
    }
  }
  
  // Function to handle button clicks in the Brand section
  function handleBrandButtonClick(button) {
    const brand = button.getAttribute("data-brand");
    updateModelSelector(brand);
  }
  
  // Add click event listeners to the brand buttons
  const brandButtons = document.querySelectorAll(".cts-btn.thumbnail");
  brandButtons.forEach((button) => {
    button.addEventListener("click", function () {
      handleBrandButtonClick(button);
    });
  });
  
  // Find the initially active brand button and update the model selector
  const initiallyActiveButton = document.querySelector(".cts-btn.thumbnail.active");
  if (initiallyActiveButton) {
    const initiallyActiveBrand = initiallyActiveButton.getAttribute("data-brand");
    updateModelSelector(initiallyActiveBrand);
  }
</script>

<script>
  // Attach validation function to the ".add-to-cart" button
  const addToCartButtons = document.querySelectorAll('.add-to-cart');
  
  addToCartButtons.forEach(button => {
    button.addEventListener('click', async () => {
      const messageBox = document.querySelector('.message-box');
      const errorList = document.querySelector('.error-list');
    
      messageBox.style.display = 'none';
      errorList.innerHTML = '';
    
      button.disabled = true;
      button.innerText = 'Adding to cart...';
      
      const title = globalTitle;
      const sku = globalSku;
      const totalPrice = globalPrice;
      const totalWeight = globalWeight;
      const productDimensions = {
        width: width,
        depth: length,
        height: thickness
      };
      const imageURL = document.querySelector('.product-image img').src;
    
      const requestBody = JSON.stringify({
        name: title,
        sku: sku,
        price: totalPrice,
        weight: totalWeight,
        width: productDimensions.width,
        depth: productDimensions.depth,
        height: productDimensions.height,
        image: imageURL
      });
    
      try {
        const response = await fetch('https://cut-to-size.herokuapp.com/cartItems/', {
          method: 'POST',
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          body: requestBody
        });
    
        const responseBody = await response.json();
        console.log(responseBody);
    
        let productId = null;
    
        if (response.ok) {
          if (responseBody.data != null) {
            productId = responseBody.data.id;
    
            sendToCart(productId, globalQuantity);
          } else if (responseBody.title == 'The product name is a duplicate') {
            productId = await getVariant(title);
            sendToCart(productId, globalQuantity);
          } else if (responseBody.title == 'The product sku is a duplicate') {
            let appendedSku = sku;
            let skuIsDuplicate = true;
            let variantNumber = 1;

            while (skuIsDuplicate) {
              appendedSku = sku + `V${variantNumber}`;

              const requestBody = JSON.stringify({
                name: title,
                sku: appendedSku,
                price: totalPrice,
                weight: totalWeight,
                width: productDimensions.width,
                depth: productDimensions.depth,
                height: productDimensions.height,
                image: imageURL
              });

              try {
                const response = await fetch('https://cut-to-size.herokuapp.com/cartItems/', {
                  method: 'POST',
                  headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                  },
                  body: requestBody
                });

                const responseBody = await response.json();

                if (response.ok && responseBody.data != null && responseBody.data.id) {
                  productId = responseBody.data.id;
                  skuIsDuplicate = false; // Exit the loop when a unique SKU is found
                  sendToCart(productId, globalQuantity);
                } else {
                  variantNumber++; // Try the next variant (e.g., V2, V3, ...)
                }
              } catch (error) {
                variantNumber++; // Try the next variant (e.g., V2, V3, ...)
              }
            }
          }
        } else {
          messageBox.style.display = 'block';
          errorList.innerHTML += '<li>There was an issue adding product(s) to cart.</li>';
        }
      } catch (error) {
        messageBox.style.display = 'block';
        errorList.innerHTML += '<li>There was an issue adding product(s) to cart.</li>';
      } finally {
        button.disabled = false;
        button.innerText = 'Add to Cart';
      }
    });
  });
</script>

<script>
  // Add to cart functionality
  async function getVariant(title) {
    title = encodeURIComponent(title);
  
    let response = await fetch('https://cut-to-size.herokuapp.com/cartItems/' + title, {
      method: 'GET',
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      }
    });
  
    let data = await response.json();
    let productId = data.data[0].id;
  
    return productId;
  }

  async function createCart(productId, quantity) {
    let response = await fetch('/api/storefront/carts/', {
      method: "POST",
      credentials: "same-origin",
      headers: {
        "Content-Type": "application/json"
      },
      body: '{ "lineItems": [{ "quantity": ' + quantity + ', "productId": ' + productId + '}]}'
    });
  
    let data = await response.json();
    let cartId = data.id;
  
    if (JSON.stringify(data).includes('createdTime')) {
      const cartQuantityElement = document.querySelector('.cart-quantity');
      const cartQuantity = parseInt(cartQuantityElement.textContent, 10);
  
      if (cartQuantity === 0) {
        cartQuantityElement.textContent = globalQuantity.toString();
        cartQuantityElement.classList.add('countPill--positive');
      } else {
        const newCartQuantity = cartQuantity + globalQuantity;
        cartQuantityElement.textContent = newCartQuantity;
      }
    }
  }
  
  async function getCartId() {
    let cartId = null;
  
    let response = await fetch('/api/storefront/carts?include=lineItems.digitalItems.options,lineItems.physicalItems.options', {
      method: "GET",
      credentials: "same-origin"
    });
  
    let data = await response.json();
  
    if(JSON.stringify(data) == '[]') {
      cartId = null;
    } else {
      cartId = data[0].id;
    }
  
    return cartId;
  }
  
  async function sendToCart(productId, quantity) {
    let cartId = await getCartId();
  
    if(cartId == null) {
      createCart(productId, quantity);
    } else {
      let response = await fetch('/api/storefront/carts/' + cartId + '/items', {
        method: "POST",
        credentials: "same-origin",
        headers: {
          "Content-Type": "application/json"
        },
        body: '{ "lineItems": [{ "quantity": ' + quantity + ', "productId": ' + productId + '}]}'
      });
  
      let data = await response.json();
  
      if (JSON.stringify(data).includes('createdTime')) {
        const cartQuantityElement = document.querySelector('.cart-quantity');
        const cartQuantity = parseInt(cartQuantityElement.textContent, 10);
  
        if (cartQuantity === 0) {
          cartQuantityElement.textContent = globalQuantity.toString();
          cartQuantityElement.classList.add('countPill--positive');
        } else {
          const newCartQuantity = cartQuantity + globalQuantity;
          cartQuantityElement.textContent = newCartQuantity;
        }
      }
    }
  }
</script>

<script>
  // Handles button clicks
  function handleSectionButtonClick(sectionButtons, selectedButton) {
    sectionButtons.forEach(button => {
      if (button === selectedButton) {
        button.classList.add('active');
      } else {
        button.classList.remove('active');
      }
    });
  }
  
  function addClickEventToButtons(sectionSelector) {
    const sectionButtons = document.querySelectorAll(`${sectionSelector} .cts-btn`);
    sectionButtons.forEach(button => {
      button.addEventListener('click', function() {
        handleSectionButtonClick(sectionButtons, button);
      });
    });
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    addClickEventToButtons('.product-options .brand');
  });
</script>

<script>
  // Handles the quantity box
  const decrementButton = document.querySelector('.decrement');
  const incrementButton = document.querySelector('.increment');
  const quantityInput = document.querySelector('.quantity-input');
  
  decrementButton.addEventListener('click', () => {
    updateQuantity(-1);
  });
  
  incrementButton.addEventListener('click', () => {
    updateQuantity(1);
  });
  
  quantityInput.addEventListener('input', () => {
    validateInput();
  });
  
  quantityInput.addEventListener('blur', () => {
    validateInput(true);
  });
  
  quantityInput.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
      validateInput(true);
    }
  });
  
  function updateQuantity(change) {
    let currentValue = parseInt(quantityInput.value);
    if (!isNaN(currentValue)) {
      currentValue += change;
      if (currentValue < 1) {
        currentValue = 1;
      } else if (currentValue > 999) {
        currentValue = 999;
      }
      quantityInput.value = currentValue;
      globalQuantity = currentValue;
    }
  }
  
  function validateInput(shouldResetOnEmpty) {
    let currentValue = quantityInput.value;
    currentValue = currentValue.replace(/\D/g, ''); // Remove non-numeric characters
  
    if (currentValue === "") {
      if (shouldResetOnEmpty) {
        quantityInput.value = "1";
      }
    } else {
      const numericValue = parseInt(currentValue);
  
      if (isNaN(numericValue) || numericValue < 1) {
        currentValue = "1";
      } else if (numericValue > 999) {
        currentValue = "999";
      }
  
      quantityInput.value = currentValue;
      globalQuantity = currentValue;
    }
  }
</script>

<script>
  // Handles the opening/closing of modals
  document.addEventListener("DOMContentLoaded", function() {
    const modalOverlays = document.querySelectorAll(".modal-overlay");
    const closeButton = document.querySelectorAll(".close-btn");
  
    const buttons = document.querySelectorAll(".open-modal");
    const offset = 20;
  
    buttons.forEach((button) => {
      button.addEventListener("click", () => {
        const modalId = button.dataset.modal;
        const modal = document.getElementById(modalId);
        modal.style.display = "block";
  
        const targetSection = button.dataset.section;
        const targetAnchor = document.getElementById(targetSection);
  
        // Scroll the modal content to the target anchor when the modal is opened with an offset
        if (targetAnchor) {
          const modalContent = modal.querySelector(".modal-content");
          const targetPosition = targetAnchor.getBoundingClientRect().top;
          const offsetPosition = targetPosition - modalContent.getBoundingClientRect().top + modalContent.scrollTop - offset;
          modalContent.scrollTo({
            top: offsetPosition,
            behavior: "smooth"
          });
        }
      });
    });
  
    closeButton.forEach((button) => {
      button.addEventListener("click", () => {
        const modal = button.closest(".modal-overlay");
        modal.style.display = "none";
      });
    });
  
    modalOverlays.forEach((modalOverlay) => {
      modalOverlay.addEventListener("click", (event) => {
        if (event.target === modalOverlay) {
          modalOverlay.style.display = "none";
        }
      });
    });
  });
</script>

{{/partial}}

{{> layout/base}}
